# MorphoLang: A Bioelectric Compiler for Morphogenesis

**MorphoLang** is an open-source toolkit that operationalizes the "Bioelectric Code." It treats biological pattern formation as a computational process, allowing researchers to compile high-level anatomical goals (e.g., "Build an Eye") into low-level molecular interventions (e.g., "Inject Kv1.5 mRNA").

> "If bioelectric dynamics... can be treated as a kind of software, the next revolution in biology could be... driven by the realization that we do not have to manipulate living systems at the level of their 'machine code' (affecting specific molecules), but at the level of information."  
> ‚Äî *Levin & Martyniuk, 2017*

---

## üß¨ Core Philosophy

Traditional regenerative medicine often attempts to micromanage individual cell fates. **MorphoLang** takes a top-down control approach, targeting the **bioelectric setpoints** that orchestrate large-scale anatomy.

* **Hardware:** Ion channels and gap junctions (the transistors).
* **Software:** Spatio-temporal membrane potential ($V_{mem}$) patterns (the code).
* **Subroutines:** Modular anatomical triggers (e.g., "Regenerate Tail") that can be activated by specific voltage states.

## üìÇ Repository Structure

* **`/subroutines`**: The standard library of anatomical commands defined in `subroutine_schema.json`.
* **`/compiler`**: Python scripts that translate bioelectric states into wet-lab protocols (`experiment_gen.py`).
* **`/verification`**: Computer vision tools to verify bioelectric states using voltage-reporting dyes (`dye_decode.py`).
* **`/database`**: A seed database of validated bioelectric interventions (`database_seed.json`).

## üöÄ Quick Start

### 1. Installation
```bash
git clone https://github.com/YourUsername/MorphoLang.git
cd MorphoLang
pip install -r requirements.txt
```

### 2. Compile an Experiment

Generate a protocol to induce an ectopic eye in _Xenopus laevis_:

```python
from compiler.experiment_gen import BioCompiler

# Initialize the compiler
compiler = BioCompiler()

# Request a subroutine
# The compiler searches for a bioelectric state that maps to "Eye" in "Xenopus"
protocol = compiler.find_subroutine(organ="eye", species="Xenopus laevis")

# Generate the lab manual
print(compiler.generate_protocol(protocol))
```

**Output:**

```text
[PHASE 1: TARGET STATE DEFINITION]
To achieve eye morphogenesis, the tissue must enter the following state:
  > Spatial Domain: ventral_ectoderm
  > Target Vmem:    [-50, -30] mV
  > Duration:       24 hours

[PHASE 2: HARDWARE SELECTION]
Select ONE of the following drivers to instantiate the state:
  OPTION 1: Kv1.5 (ion_channel_mRNA)
    - Mechanism: Voltage-gated Potassium efflux (Hyperpolarization)
    - Source: Pai et al., 2012
```

### 3. Verify the State

After applying the intervention, verify the tissue state using fluorescent microscopy data:

```python
from verification.dye_decode import BioStateValidator

validator = BioStateValidator()
vmem_map = validator.analyze_image('experiment_data/sample_01.tif')
success, msg = validator.verify_state(vmem_map, protocol['bioelectric_state'])

print(msg) # "SUCCESS: Tissue has entered the Target Bioelectric State."
```

## üìö The Standard Library (Bioelectric DB)

MorphoLang comes seeded with validated subroutines derived from primary literature:

| **ID** | **Target** | **Mechanism** | **Reference** |
|---|---|---|---|
| `xenopus_ectopic_eye_01` | **Induce Eye** | Hyperpolarization (Kv1.5) | [Pai et al., 2012](https://doi.org/10.1242/dev.073759) |
| `xenopus_tail_regen_01` | **Regenerate Tail** | Proton Efflux (H+ Pump) | [Adams et al., 2007](https://doi.org/10.1242/dev.02812) |
| `planaria_head_respec_01` | **Remodel Head** | Gap Junction Blockade | [Emmons-Bell et al., 2015](https://doi.org/10.3390/ijms161126065) |
| `xenopus_limb_regen_01` | **Regenerate Leg** | Sodium Ionophore | [Tseng et al., 2010](https://doi.org/10.1523/JNEUROSCI.3769-10.2010) |

## ü§ù Contributing

We welcome contributions! If you have discovered a new **Bioelectric State** that maps to a morphological outcome:

1. Fork the repo.
2. Create a new JSON file in `/subroutines` following the `subroutine_schema.json`.
3. Ensure your `target_vmem_range` is supported by peer-reviewed data.
4. Submit a Pull Request.

## ‚ö†Ô∏è Safety & Ethics Disclaimer

- **For Research Use Only:** The protocols generated by this tool are for educational and research purposes in controlled laboratory environments.
- **Animal Ethics:** All experiments involving living organisms (e.g., _Xenopus_, _Planaria_) must be approved by your local IACUC or equivalent ethical oversight body.
- **High Voltage:** While bioelectricity deals with millivolts, the equipment used to measure or induce it can be dangerous. Follow standard lab safety protocols.

## üìÑ License

Distributed under the MIT License. See `LICENSE` for more information.

---

_Based on the research of Dr. Michael Levin and the Allen Discovery Center at Tufts University._
